build_environment: ubuntu1204
language: node_js
node_js:
  - "0.10"

env:
  global:
    # AWS_CREDENTIALS -> client/aws-credentials.json
    - secure: NHHqZUwqzlHDiEtOEIJAEU07bGJm3m2S7Pfb61r9+wCmL/EvlXHZ+KMaUOUgQOPZ1Amav42asSdXcxfxw3YkJp0d6Tp7/PNlevUhFgqmyuP8nY7Tr5VBy7/YiJEgZYXhmCiDc9oUBNftE1OInibJxq+YqmbZJJhVKTqGz5EiU6LppA8tLK0CKDnL2zBu+dtQQZGafl8Ar3hqgwntVQJy69KOePcIJ04mZuafDH1Du8KPi5ljVW63WJ8FvLyi0Emc7+qj9M7mpm9VywXdsumJ7TsuN3VBe+P8cQhcGNrrHaQwnVKO86ILNP9L8u2PhzA5T2nkiPqh9ZSmqJum/btmDA==

before_install:
  - npm install -g grunt-cli bower pkaminski/s3-static-site-uploader
  - npm update -g pkaminski/s3-static-site-uploader

install:
  - cd client
  - npm install
  - bower install

script:
  - cd client
  - grunt

after_success:
  - cd client
  - printenv AWS_CREDENTIALS
  - printenv AWS_CREDENTIALS >aws-credentials.json
  - s3-upload
