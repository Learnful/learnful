build_environment: ubuntu1204
language: node_js
node_js:
  - "0.10"

env:
  global:
    # AWS_CREDENTIALS -> client/aws-credentials.json
    - secure: WLjCybK7XK2+W9aLCuxqWR6kzskY5p+ftpnNnQhgG57oez6h+t6eSAB9CL9BYZob6bPNeME0Yy557mWjSz2VfCbyuNgpRVitdNB+Zr7wWbx8P9nzcIFRYyEFBSfq2Hmgw8jMRXfNAmsJ2CJ9qXKpjnTkzfghRlZLg7Za3FdfGzXS6dRhlJPeFkYNebxsYFSLPbc/cz06EZLEWDLrLei/R4OqB1IMY06KjrYAPzk4nwWzON99Fo+E2uUheJ2n75sNll3O4fq/DW2N0+8o2nwOT7mi2IN1CSmt1p6F0qb96zHuy7QR+hKID2hH2NXY56gHboT0WE4Q/Fg88ysrbJNs8g==

before_install:
  - npm install -g grunt-cli bower pkaminski/s3-static-site-uploader
  - npm update -g pkaminski/s3-static-site-uploader

install:
  - cd client
  - npm install
  - bower install

script:
  - cd client
  - grunt

after_success:
  - cd client
  - printenv
  - printenv AWS_CREDENTIALS
  - printenv AWS_CREDENTIALS >aws-credentials.json
  - cat aws-credentials.json
  - s3-upload
