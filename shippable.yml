build_environment: ubuntu1204
language: node_js
node_js:
  - "0.10"

env:
  global:
    # AWS_CREDENTIALS -> client/aws-credentials.json
    - secure: X8Jk+ehN0Z1iQLaeScpSqSmHcRfvy62Ay9IKVNcC7j15mfXeroip/Yzv6VzVyzxplVAz7tImCDqgRbFEqOTAfffApm9IgubG0yMhAqDhvD3W0Ixe4ttWHXfqBx7malFMslBtrjlU3HcBmlrZzViL/EkSNADWgAIigJhqN8LhpiODKa3vXOUG7ExZQj4PQLA1COssYUtP6JCQ+XkUZrGBgp8aBGAIHwlS2pg4un0wBk1kArgL/JulojpDrxzspkuYEX1yiPPdiLmJsJRH1NPej5BfLlC4oux0chXo04M0kO5DZYmvxmB/M9nDR9MXnuDpIwoj8GYPrpVdamqEY/fQLw==

before_install:
  - npm install -g grunt-cli bower pkaminski/s3-static-site-uploader
  - npm list -g s3-upload

install:
  - cd client
  - npm install
  - bower install

script:
  - cd client
  - grunt dist

after_success:
  - cd client
  - printenv AWS_CREDENTIALS >aws-credentials.json
  - s3-upload
